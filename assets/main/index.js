System.register("chunks:///main.js",["./_rollupPluginModLoBabelHelpers-4a72ac95.js","cc"],(function(){"use strict";var t,i,e,n,o,a,s,c,h,r,u,l,m,y,v,p,g,f,d;return{setters:[function(a){t=a._,i=a.a,e=a.b,n=a.c,o=a.d},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,h=t.Vec3,r=t.Camera,u=t.Animation,l=t.systemEvent,m=t.SystemEvent,y=t.assetManager,v=t.director,p=t.Vec2,g=t.geometry,f=t.PhysicsSystem,d=t.Component}],execute:function(){var T,b,w,x,A;a._RF.push({},"736456UwFlNLayDP0prSSSm","TouchMgr",void 0);var M,R,S,C,F,_=s.ccclass,B=s.property,E=(T=_("TouchMgr"),b=B({type:c}),T((A=t((x=function(t){function a(){for(var i,a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return i=t.call.apply(t,[this].concat(s))||this,e(n(i),"boy",A,n(i)),o(n(i),"vec3",new h),o(n(i),"targetFov",68),o(n(i),"rawFov",63),o(n(i),"touching",!1),o(n(i),"camera",void 0),o(n(i),"speed",.2),o(n(i),"touchDeltaTime",100),o(n(i),"touchTime",void 0),o(n(i),"boyAnimation",void 0),o(n(i),"cameraAnimation",void 0),o(n(i),"animRank",0),o(n(i),"animPlaying",!1),o(n(i),"horizonMagrin",7),o(n(i),"canTouch",!0),o(n(i),"loadNextScene",!1),o(n(i),"sceneBundle",void 0),i}i(a,t);var s=a.prototype;return s.start=function(){var t=this;this.camera=this.node.getChildByName("Main Camera").getComponent(r),null!==this.boy&&(this.boyAnimation=this.boy.getComponent(u)),this.cameraAnimation=this.node.getComponent(u),l.on(m.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(m.EventType.TOUCH_START,this.onTouchStart,this),l.on(m.EventType.TOUCH_END,this.onTouchEnd,this),y.loadBundle("Reel2",(function(i,e){t.sceneBundle=e,t.loadNextScene=!0}))},s.switchScene=function(){this.loadNextScene&&this.sceneBundle.loadScene("Reel2",(function(t,i){v.runScene(i)}))},s.onTouchStart=function(t){var i=new Date;this.touchTime=i.getTime(),this.touching=!0},s.onTouchEnd=function(t){var i=new Date;if(this.touchDeltaTime=i.getTime()-this.touchTime,this.touching=!1,this.touchDeltaTime<150){var e=new p;t.getLocationInView(e),this.clickHandler(e)}},s.clickHandler=function(t){if(!this.animPlaying){var i=new g.Ray;if(this.camera.screenPointToRay(t.x,640-t.y,i),f.instance.raycastClosest(i))if("Boy<BoxCollider>"==f.instance.raycastClosestResult.collider.name)switch(this.animRank){case 0:this.boyAnimation.play("Boy_Default"),this.animPlaying=!0;break;case 1:this.boyAnimation.play("Boy_Anim2"),this.animPlaying=!0;break;case 2:this.boyAnimation.play("Boy_Anim3"),this.cameraAnimation.play("Camera_Anim1"),this.animPlaying=!0;break;case 3:this.boyAnimation.play("Boy_Anim4"),this.animPlaying=!0;break;case 4:this.switchScene()}}},s.onTouchMove=function(t){this.canTouch&&this.moveCamera(t.getDelta())},s.update=function(t){this.touchFov(t),this.followTarget(t)},s.touchFov=function(t){if(!this.animPlaying&&this.canTouch)if(this.touching){var i=this.camera.fov+(this.targetFov-this.camera.fov)*t*7;this.camera.fov=i}else{i=this.camera.fov+(this.rawFov-this.camera.fov)*t*7;this.camera.fov=i}},s.followTarget=function(t){if(this.animPlaying){var i=new p;i.x=this.boy.eulerAngles.y-this.node.eulerAngles.y,Math.abs(i.x)>.5&&(i.x>0?i.x=i.x*t*15+120*t:i.x<0&&(i.x=i.x*t*15-120*t),this.moveCamera(i)),i.y=(-3.5-this.node.eulerAngles.x)*t*10,this.node.setRotationFromEuler(this.node.eulerAngles.x+i.y,this.node.eulerAngles.y)}},s.moveCamera=function(t){this.vec3=this.node.eulerAngles,this.vec3.x>0&&(t.y<0?this.vec3.x-=t.y*this.speed*Math.pow((10-this.vec3.x)/10,3):this.vec3.x-=t.y*this.speed),this.vec3.x<=0&&(t.y>0?this.vec3.x-=t.y*this.speed*Math.pow((10-Math.abs(this.vec3.x))/10,3):this.vec3.x-=t.y*this.speed),this.vec3.x>this.horizonMagrin?this.vec3.x=this.horizonMagrin:this.vec3.x<-this.horizonMagrin&&(this.vec3.x=-this.horizonMagrin),this.vec3.y+=t.x*this.speed/2,this.node.setRotationFromEuler(this.vec3)},s.animEnd=function(){this.animRank++,this.animPlaying=!1},s.TouchSwitch=function(){this.canTouch?this.canTouch=!1:this.canTouch=!0},s.DisableFollow=function(){this.animPlaying=!1},s.switchWebTest=function(){window.location.href="https://www.baidu.com"},a}(d)).prototype,"boy",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=x))||w);a._RF.pop(),a._RF.push({},"ccf07+m87FKc5G1JRbs83Ug","BoyMgr",void 0);var P,k=s.ccclass,D=s.property;M=k("BoyMgr"),R=D({type:c}),M((F=t((C=function(t){function a(){for(var i,a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return i=t.call.apply(t,[this].concat(s))||this,e(n(i),"cameraRoot",F,n(i)),o(n(i),"touchMgr",void 0),i}i(a,t);var s=a.prototype;return s.start=function(){this.touchMgr=this.cameraRoot.getComponent(E)},s.animEnd=function(){this.touchMgr.animEnd()},a}(d)).prototype,"cameraRoot",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=C));a._RF.pop(),a._RF.push({},"e8751X7AB9N3pl/yWNblAUK","StartSceneMgr",void 0);var N=s.ccclass;s.property,N("StartSceneMgr")(P=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e}(d));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});